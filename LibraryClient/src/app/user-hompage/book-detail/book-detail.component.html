<div class="book-detail" *ngIf="book">
    <div class="book-image">
        <img *ngIf="imageUrl" [src]="imageUrl" alt="{{ book.name }}" />
    </div>
    <div class="book-info">
        <h1>{{ book.name }}</h1>
        <p><strong>Tác giả:</strong> {{ book.authorName }}</p>
        <p><strong>Thể loại:</strong> {{ book.categoryName }}</p>
        <p><strong>Năm xuất bản:</strong> {{ book.yearPublished }}</p>
        <p><strong>Giá:</strong> {{ book.price | currency:'USD' }}</p>
        <p><strong>Số lượng:</strong> {{ book.quantity }}</p>
        <p><strong>Trạng thái:</strong> {{ book.isAvailable ? 'Còn hàng' : 'Hết hàng' }}</p>
        <p><strong>Mô tả:</strong> {{ book.description }}</p>

        <!-- Phần mượn sách -->
        <div class="borrow-section" *ngIf="book.isAvailable">
            <!-- <label>Số lượng mượn:</label> -->
            <!-- <div class="quantity-control"> -->
            <!-- <button (click)="decreaseQuantity()" [disabled]="borrowQuantity <= 1">-</button>
                <input type="number" [(ngModel)]="borrowQuantity" min="1" [max]="book.quantity" readonly>
                <button (click)="increaseQuantity()" [disabled]="borrowQuantity >= book.quantity">+</button> -->
            <!-- </div> -->
            <button class="borrow-btn" (click)="onBorrow()">Borrow</button>
        </div>

        <!-- Modal xác nhận -->
        <div class="modal" *ngIf="showConfirmModal">
            <div class="modal-content">
                <h2>Xác nhận mượn sách</h2>
                <p>Bạn có chắc chắn muốn mượn sách "{{ book.name }}" không?</p>
                <div class="modal-actions">
                    <button class="confirm-btn" (click)="confirmBorrow()">Xác nhận</button>
                    <button class="cancel-btn" (click)="cancelBorrow()">Hủy</button>
                </div>
            </div>
        </div>

        <!-- Modal thành công -->
        <div class="modal" *ngIf="showSuccessModal">
            <div class="modal-content">
                <h2>Thành công</h2>
                <p>Yêu cầu mượn sách "{{ book.name }}" đã được gửi thành công!</p>
                <div class="modal-actions">
                    <button class="close-btn" (click)="closeSuccessModal()">Đóng</button>
                </div>
            </div>
        </div>
        <a [routerLink]="['/homepage']" class="back-link">Quay lại</a>
    </div>
</div>