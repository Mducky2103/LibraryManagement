<div class="container mt-4">
    <div class="card">
        <div class="card-header">
            <h2>User Profile</h2>
        </div>
        <div class="card-body" *ngIf="user">
            <!-- Email luôn là readonly -->
            <p><strong>Email:</strong> {{ user.email }}</p>

            <!-- Full Name -->
            <p *ngIf="!isEditing"><strong>Full Name:</strong> {{ user.fullName }}</p>
            <div *ngIf="isEditing" class="mb-3">
                <label class="form-label"><strong>Full Name:</strong></label>
                <input type="text" class="form-control" [(ngModel)]="editProfile.fullName" name="fullName">
            </div>

            <!-- Gender -->
            <p *ngIf="!isEditing"><strong>Gender:</strong> {{ user.gender }}</p>
            <div *ngIf="isEditing" class="mb-3">
                <label class="form-label"><strong>Gender:</strong></label>
                <select class="form-control" [(ngModel)]="editProfile.gender" name="gender">
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>

            <!-- Date of Birth -->
            <p *ngIf="!isEditing"><strong>Date of Birth:</strong> {{ user.dateOfBirth | date: 'dd/MM/yyyy' }}</p>
            <div *ngIf="isEditing" class="mb-3">
                <label class="form-label"><strong>Date of Birth:</strong></label>
                <input type="date" class="form-control" [(ngModel)]="editProfile.dateOfBirth" name="dateOfBirth">
            </div>

            <!-- Roles (Không chỉnh sửa) -->
            <p><strong>Roles:</strong> {{ user.roles }}</p>

            <!-- Nút Edit / Save -->
            <button *ngIf="!isEditing" class="btn btn-primary mt-3" (click)="toggleEdit()">Edit Profile</button>

            <div *ngIf="isEditing" class="mt-3">
                <button class="btn btn-success" (click)="saveProfile()">Save</button>
                <button class="btn btn-secondary ms-2" (click)="toggleEdit()">Cancel</button>
            </div>
        </div>
    </div>
</div>